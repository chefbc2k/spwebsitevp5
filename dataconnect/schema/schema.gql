# Users
type User
  @table(name: "Users", singular: "user", plural: "users", key: ["id"]) {
  id: UUID! @col(name: "user_id") @default(expr: "uuidV4()")
  auth: String! @col(name: "user_auth") @default(expr: "auth.uid")
  username: String! @col(name: "username", dataType: "varchar(30)")
  email: String! @col(name: "email")
  createdAt: Timestamp! @col(name: "created_at") @default(expr: "request.time")
}

# NFTs
type NFT
  @table(name: "NFTs", singular: "nft", plural: "nfts", key: ["id"]) {
  id: UUID! @col(name: "nft_id") @default(expr: "uuidV4()")
  title: String! @col(name: "title")
  description: String @col(name: "description")
  creator: User! @ref
  createdAt: Timestamp! @col(name: "created_at") @default(expr: "request.time")
  price: Float! @col(name: "price")
  fileUrl: String! @col(name: "file_url")
}

# Transactions
type Transaction
  @table(name: "Transactions", singular: "transaction", plural: "transactions", key: ["id"]) {
  id: UUID! @col(name: "transaction_id") @default(expr: "uuidV4()")
  nft: NFT! @ref
  buyer: User! @ref
  seller: User! @ref
  price: Float! @col(name: "price")
  transactionDate: Timestamp! @col(name: "transaction_date") @default(expr: "request.time")
}

# Ownerships
type Ownership
  @table(name: "Ownerships", singular: "ownership", plural: "ownerships", key: ["nft", "owner"]) {
  nft: NFT! @ref
  owner: User! @ref
  acquiredAt: Timestamp! @col(name: "acquired_at") @default(expr: "request.time")
}